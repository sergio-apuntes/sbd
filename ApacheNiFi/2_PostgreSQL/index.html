
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Notas sobre el uso de Postgres en el módulo de SBD">
      
      
      
        <link rel="canonical" href="https://sergio-apuntes.github.io/sbd/ApacheNiFi/2_PostgreSQL/">
      
      
        <link rel="prev" href="../1_ETL/">
      
      
        <link rel="next" href="../3_ApacheNiFi/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>2. PostgreSQL - Apuntes Sistemas en Big Data</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#instalacion-de-postgresql" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Apuntes Sistemas en Big Data" class="md-header__button md-logo" aria-label="Apuntes Sistemas en Big Data" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apuntes Sistemas en Big Data
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2. PostgreSQL
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Apuntes Sistemas en Big Data" class="md-nav__button md-logo" aria-label="Apuntes Sistemas en Big Data" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Apuntes Sistemas en Big Data
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    NoSQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            NoSQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../noSQL/1_NoSQL%20Intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../noSQL/2_NoSQL%20NoSoloSQL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. No Solo SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../noSQL/3_NoSQL%20ModeloDatos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Modelos de datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../noSQL/4_NoSQL%20Consistencia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Consistencia
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MongoDB
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/1_mongodb%20Introducci%C3%B3n./" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Introducción a MongoDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/2_mongodb%20MongoDB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. MongoDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/3_mongodb%20ModeladoDatos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Diseño de modelado de bases de datos. schemaless
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/4_mongodb%20Instalaci%C3%B3n/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Instalación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/5_mongodb%20PrimerosPasos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Primeros pasos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/6_mongodb%20OperacionesCRUD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Operaciones con datos CRUD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/7_mongodb%20OperacionesDatos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7. Consulta de datos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ETL con Apache NiFi
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ETL con Apache NiFi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_ETL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. ETL con Apache NiFi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    2. PostgreSQL
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    2. PostgreSQL
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de PostgreSQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación de PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion-en-ubuntu-derivados-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación en Ubuntu (derivados Debian)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalacion-en-centos-derivados-red-hat" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación en CentOS (derivados Red Hat)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-y-acceso-de-rolesusuarios-y-bases-de-datos-desde-consola" class="md-nav__link">
    <span class="md-ellipsis">
      Creación y acceso de roles/usuarios y bases de datos desde consola
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dbeaver" class="md-nav__link">
    <span class="md-ellipsis">
      DBeaver
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_ApacheNiFi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Apache NiFi
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Elasctic Stack
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Elasctic Stack
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ElasticStack/1_elastic_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ElasticStack/2_elastic_operaciones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Elasticsearch. Operaciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ElasticStack/3_elastic_kibana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Kibana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ElasticStack/4_elastic_python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Elasticsearch. Acceso desde cliente Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ElasticStack/5_elastic_nifi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Elastic stack y Apache Nifi
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de PostgreSQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación de PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion-en-ubuntu-derivados-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación en Ubuntu (derivados Debian)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalacion-en-centos-derivados-red-hat" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación en CentOS (derivados Red Hat)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-y-acceso-de-rolesusuarios-y-bases-de-datos-desde-consola" class="md-nav__link">
    <span class="md-ellipsis">
      Creación y acceso de roles/usuarios y bases de datos desde consola
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dbeaver" class="md-nav__link">
    <span class="md-ellipsis">
      DBeaver
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>2. PostgreSQL</h1>

<p><code>PostgreSQL</code>, también llamado <code>Postgres</code>, es un sistema de gestión de bases de datos relacional orientado a objetos y de código abierto, publicado bajo la licencia PostgreSQL,1​ similar a la BSD o la MIT. </p>
<p>Los datos de los sistemas de Big Data se pueden guardar de formas diferentes. Para nuestro módulo en concreto, necesitamos una base de datos donde <em>cargar</em> (ET<strong>L</strong>) los datos extraídos antes de su tratamiento final, y utilizaremos esta base de datos.</p>
<h2 id="instalacion-de-postgresql">Instalación de <code>PostgreSQL</code></h2>
<h3 id="instalacion-en-ubuntu-derivados-debian">Instalación en <em>Ubuntu</em> (derivados <em>Debian</em>)</h3>
<p>PostgreSQL se encuentra en el repositorio apt de Ubuntu por lo cual la instalación es sencilla. Se recomienda seguir los pasos de instalacion y configuración de la web de <a href="https://ubuntu.com/server/docs/install-and-configure-postgresql">Ubuntu Server - Install PostgreSQL</a></p>
<p>No obstante, los pasos son senciallos y para dejar el sistema preparado basta con seguir ejecutar: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>postgresql
</span></code></pre></div>
<p>Para su configuración, en primer lugar editamos el fichero de configuración y permitimos que se pueda conectar desde cualqier dirección: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/postgresql/16/main/postgresql.conf
</span></code></pre></div>
<p>Localizamos la línea </p>
<div class="language-text highlight"><pre><span></span><code>#listen_addresses = ‘localhost’
</code></pre></div>
<p>y la cambiamos por </p>
<div class="language-text highlight"><pre><span></span><code>listen_addresses = &#39;*&#39;
</code></pre></div>
<p>Continuamos asignando una contraseña al usuario <code>postgres</code> para poder entrar en el sistema. Para ello ejecutamos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>psql<span class="w"> </span>template1
</span></code></pre></div>
<p>con esto entrmos en la consola de postgres, dentro de la base de datos template1, y ahí podemos ejecutar la siguiente instrucción donde podemos especificar nuestra contraseña:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">ALTER</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">encrypted</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="s1">&#39;your_password&#39;</span><span class="p">;</span>
</span></code></pre></div>
<p>Después de configurar la contraseña, debemos permitir autentificarse en el servidor para lo cual editaremos el fichero <code>/etc/postgresql/16/main/pg_hba.conf</code> y permitiremos autentificacion mediante protocolo <code>md5</code>. Para ello</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/postgresql/16/main/pg_hba.conf
</span></code></pre></div>
y localizamos la línea </p>
<div class="language-text highlight"><pre><span></span><code>host    all     all     127.0.0.1/32    scram-sha-256
</code></pre></div>
<p>y la sustituimos por </p>
<div class="language-text highlight"><pre><span></span><code>host    all     all     0.0.0.0/0    md5
</code></pre></div>
<p>lo que permitirá autentificarmos por medio de <code>md5</code> desde cualquier equipo. Quedará algo así: </p>
<figure align="center">
  <a class="glightbox" href="../../images/varios/Postgres03.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../../images/varios/Postgres03.png" width="85%" /></a>
<br />
<figcaption>/etc/postgresql/16/main/pg_hba.conf</figcaption>
</figure>
<p>y ya tenemos el sistema preparado para conectarnos desde el exterior y con su contraseña establacecida, así que reiniciamos el servicio:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>postgresql.service
</span></code></pre></div>
<p>y ya tenemos el sistema preparado.</p>
<h3 id="instalacion-en-centos-derivados-red-hat">Instalación en <em>CentOS</em> (derivados <em>Red Hat</em>)</h3>
<p>Para la instalación de <code>Postgres</code> en <code>CentOS</code> seguiremos el siguiente <a href="https://www.commandprompt.com/education/how-to-install-postgresql-on-centos/">Articulo: How to install PostgreSQL on CentOS</a></p>
<p>Sobre esta guía, cabe aconsejar realizar los siguientes cambios en el fichero de configuración <code>/var/lib/pgsql/data/pg_hba.conf</code> (el cual debe editarse como <code>root</code>)</p>
<div align="center">
    <a class="glightbox" href="../../images/pg_hba_conf.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="../../images/pg_hba_conf.png" alt="config postgres" width="60%" /></a>
</div>

<p>Observar en la imagen que se ha cambiado <em>peer</em> e <em>ident</em> por <strong><em>md5</em></strong> para las conexiones locales (desde el terminal) o mediante IPv4, de esta forma podremos conectando usando un usuario y contraseña cualquiera que se encuentre en Postgres</p>
<p>Nota: Si este cambio no se realiza, al intentar conectarnos, encontraremos un error del tipo: <code>PSQLException: FATAL: la autentificación Ident falló para el usuario «sergio»</code></p>
<h3 id="creacion-y-acceso-de-rolesusuarios-y-bases-de-datos-desde-consola">Creación y acceso de roles/usuarios y bases de datos desde consola</h3>
<p>Por defecto, la autentificación es mediante <em>roles</em>. Al principio se asocia un rol a una cuenta existente en nuestro sistema Linux. Esta cuenta tiene el nombre de <strong>postgres</strong> y se crea automáticamente al instalar <code>PostgreSQL</code>. </p>
<p>No hay una contraseña por defecto del rol <strong>postgres</strong>. El modo de autenticación por defecto para <code>PostgreSQL</code> está configurado como <code>ident</code>, no como sql DB user/password. Lo que realmente significa es que para conectarse correctamente a <code>PostgreSQL</code> debe iniciar sesión como el usuario correcto del sistema operativo que se utilizó para instalarlo. Prácticamente se autentifica con el usuario del SO, por eso hemos realizado los cambios descritos anteriormente.</p>
<p>Por lo tanto, para comenzar la primera vez en el terminal de la base de datos PostgreSQL, debemos cambiarnos a este usuario <strong>postgres</strong>:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>-i<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w">   </span><span class="c1"># cambiamos al usuario postgres </span>
</span></code></pre></div>
Una vez estamos dentro de la terminal del usuario postgres, ya tenemos permisos para entrar en la propia terminal de PostgreSQL, mediante el comando <code>psql</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>postgres@server:~$<span class="w"> </span>psql<span class="w"> </span><span class="c1"># para entrar </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \q       # para salir</span>
</span></code></pre></div>
<p>y ya que estamos</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \l               # listado de base de datos</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \d               # listado de tablas de base de datos activa</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \c &lt;database&gt;    # para cambiar de base de datos</span>
</span></code></pre></div>
<p>El rol de <code>postgres</code> es administrador, y aunque nosotros podemos utilizarlo, cabe indicar que no es correcto utilizarlo para acceder al sistema, es mejor crear nuevos roles, e incluso crear un rol para cada base de datos nueva que utilicemos.</p>
<p>Para <strong>crear nuevos roles</strong>, normalmente lo hacemos desde el usuario linux <code>postgres</code>:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>postgres@server:~$<span class="w"> </span>createuser<span class="w"> </span>--interactive
</span></code></pre></div>
En este caso nos pide el usuario y la contraseña</p>
<p>Una vez creado el usuarios, le debemos asignar una contraseña y darle los permisos necesarios:</p>
<p><div class="language-postgres highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">ALTER</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">sergio</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">ENCRYPTED</span><span class="w"> </span><span class="k">PASSWORD</span><span class="w"> </span><span class="s1">&#39;sergio&#39;</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">basededatos</span><span class="o">&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="o">&lt;</span><span class="n">usuario</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span>
</span></code></pre></div>
por supuesto, antes de dar privilegios de acceso a una base de datos, se debe crear desde el usuario <code>postgres</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$<span class="w"> </span>createdb<span class="w"> </span>pruebas
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Todo lo anterior lo podemos realizar directamente una vez estamos el el terminal de <code>postgres</code>, creamos los roles y la base de datos utilizando sentencias SQL</p>
<div class="language-postgres highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">sergio</span><span class="w"> </span><span class="n">LOGIN</span><span class="w"> </span><span class="k">PASSWORD</span><span class="w"> </span><span class="s1">&#39;sergio&#39;</span><span class="p">;</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">postgres</span><span class="o">=#</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">pruebas</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sergio</span><span class="p">;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span>
</span></code></pre></div>
</div>
<div class="admonition nota">
<p class="admonition-title">Nota</p>
<p>Normalmente, si creamos un rol en Postgres, debemos tener un usuario con el mismo nombre en nuestro sistemas Linux, de forma que ambos están ligados.</p>
</div>
<p>Para entrar en una base de datos desde el terminal</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>psql<span class="w"> </span>-d<span class="w"> </span>pruebas<span class="w">         </span><span class="c1"># para entrar en la BBDD (si estamos en un usuario autorizado)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>su<span class="w"> </span>sergio<span class="w">               </span><span class="c1"># para cambiarnos a un usuario autorizada, antes de entrar en la BBDD </span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>psql<span class="w"> </span>-U<span class="w"> </span>sergio<span class="w"> </span>-d<span class="w"> </span>pruebas<span class="w"> </span>--password<span class="w">    </span><span class="c1"># para entrar en la base de datos directamente con un usuario determinado.</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Si el usuario no lo tenemos creado en el sistema, debemos crearlo
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo<span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>sergio<span class="w">          </span><span class="c1"># creamos el usuario</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>sudo<span class="w"> </span>passwd<span class="w"> </span>sergio<span class="w">              </span><span class="c1"># le damos contraseña para activarlo.</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>sudo<span class="w"> </span>sergio<span class="w">   </span><span class="c1"># para hacer meter el usuario en el grupo &quot;sudo&quot;. Esto no es necesario.</span>
</span></code></pre></div></p>
</div>
<p>Desde aquí, ya podemos crear tablas, y trabajar datos desde este terminal.</p>
<p>Una vez creada una base de datos, es interesante <strong>probar la conexión</strong> que hemos establecido para verificar que funciona, se podría hacer desde el terminal, mediante el comando <code>psql</code>:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>psql<span class="w"> </span>-d<span class="w"> </span>postgresql://127.0.0.1:5432/pruebasnifi?user<span class="o">=</span>sergio
</span></code></pre></div>
donde especificamos la base de datos y el usuario, en este ejemplo son <em>pruebasnifi</em> y <em>sergio</em> respectivamente </p>
<h2 id="dbeaver">DBeaver</h2>
<p><code>DBeaver</code> es una aplicación de software cliente de SQL y una herramienta de administración de bases de datos muy ligera y sencilla. Es menos pesada que herramientas como <code>pgAdmin</code>, y además mediante esta herramienta podemos <strong>instalar los drivers necesarios</strong> para la posterior conexión de <code>Apache NiFi</code> a nuestras bases de datos en <code>PostgreSQL</code>, por ejemplo, por lo que vamos a hacer uso de esta herramienta.</p>
<p>Para su <strong>instalación</strong> descargar versión <em>Comunity</em> desde : <a href="https://dbeaver.io/download/">https://dbeaver.io/download/</a></p>
<p>Por supuesto descargamos el paquete adecuado a nuestro sistemas operativo.</p>
<p>Después, abrimos un terminal y instalamos y ejecutamos (en CentOS):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>sudosudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>dbeaver-&lt;version&gt;.deb<span class="w">    </span><span class="c1"># instalación </span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>dbeaver<span class="w"> </span><span class="p">&amp;</span><span class="w">                                 </span><span class="c1"># ejecución de dbeaver</span>
</span></code></pre></div>
<p>Una vez tenemos instalado DBeaver, lo inciamos y configuramos la conexión a nuestra base de datos PostgreSQL:</p>
<figure align="center">
  <a class="glightbox" href="../../images/varios/Postgres01.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../../images/varios/Postgres01.png" width="75%" /></a>
<br />
<figcaption>Creando conexión con BBDD PostgreSQL</figcaption>
</figure>
<p>Cuaod <strong>Probemos la conexión</strong> o intentemos <strong>conectarnos</strong>, la primera vez nos dirá que nos faltan los <em>drivers</em> para conectarse a <em>PostgreSQL</em>, y nos permite la instalación automatica.</p>
<figure align="center">
  <a class="glightbox" href="../../images/varios/Postgres02.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../../images/varios/Postgres02.png" width="75%" /></a>
<br />
<figcaption>Instalación automática de drivers para PostgreSQL</figcaption>
</figure>
<p>A partir de este momento, ya tenemos conexión con la base de datos y podemos utilizar DBeaver para crear bases de datos y tablas.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.instant.progress", "toc.follow", "navigation.top", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>